# 天气组件地理位置功能使用指南

## 🆕 新增功能

天气组件现在支持基于地理位置获取当地天气！

### 🎯 功能概览

1. **GPS定位天气** - 自动获取你当前位置的天气
2. **智能切换** - 在默认城市和当前位置间切换
3. **位置显示** - 清楚显示当前查看的是哪个城市的天气

## 🔧 使用方法

### 获取当前位置天气
1. 点击天气组件右上角的 **GPS图标** (🎯)
2. 浏览器会请求位置权限，点击 **"允许"**
3. 组件会自动获取你当前位置的天气数据
4. 标题会更新为你所在城市的名称

### 操作按钮说明
- 🎯 **GPS按钮** - 获取当前位置天气
- 🔄 **刷新按钮** - 刷新当前显示的天气数据
- ▼/▲ **展开按钮** - 展开/折叠详细信息

## 📍 位置权限说明

### 首次使用
浏览器会显示位置权限请求：
```
"localhost:5174 想要知道您的位置"
[阻止] [允许]
```
请点击 **"允许"** 以启用地理位置功能。

### 权限被拒绝的解决方案
如果误点了"阻止"，可以通过以下方式重新启用：

**Chrome浏览器**：
1. 点击地址栏左侧的 🔒 图标
2. 选择 "位置" → "允许"
3. 刷新页面

**其他浏览器**：
- 查找地址栏附近的位置图标
- 在浏览器设置中搜索"位置权限"

## 🎮 智能模式

### 自动记忆功能
- 获取过位置后，刷新按钮会继续刷新当前位置天气
- 重启应用时会回到默认城市（东京）
- 可随时重新获取当前位置

### 错误处理
组件会智能处理各种情况：

**位置获取失败**：
- 权限被拒绝 → 显示权限设置指引
- GPS不可用 → 提示检查网络或GPS
- 超时 → 建议稍后重试

**网络问题**：
- API请求失败 → 自动回退到默认城市
- 显示具体错误信息和解决建议

## 🌍 支持的位置类型

- ✅ **精确GPS定位** - 手机、平板等设备
- ✅ **WiFi定位** - 电脑通过WiFi获取大概位置  
- ✅ **IP定位** - 基于网络IP的大概位置
- ❌ **离线模式** - 无网络时无法获取位置

## 💡 使用建议

### 最佳体验
1. **首次访问** - 先点击GPS按钮获取当地天气
2. **定期更新** - 位置改变后重新点击GPS按钮
3. **权限管理** - 保持位置权限开启以获得最佳体验

### 隐私说明
- 📍 位置信息仅用于获取天气数据
- 🔒 不会存储或上传位置信息
- 🌐 仅向OpenWeatherMap发送坐标查询天气
- 💾 位置坐标仅在浏览器会话中临时保存

## 🎨 界面提示

### 状态指示
- **"东京天气"** - 显示默认城市天气
- **"[城市名]天气"** - 显示指定城市天气  
- **GPS按钮转圈** - 正在获取位置
- **GPS提示芯片** - 提醒可以获取当地天气

### 简化模式提示
在折叠状态下会显示：
- 🖱️ "双击展开详情"
- 🎯 "点击GPS获取当地天气" (首次使用时)

现在你可以享受个性化的本地天气服务了！🌤️
